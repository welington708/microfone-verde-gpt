<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Bot√£o de Voz</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
    }

    .botao-microfone {
      width: 48px;
      height: 48px;
      background-color: #fff;
      border: 2px solid #0070d2;
      border-radius: 8px;
      font-size: 24px;
      text-align: center;
      cursor: pointer;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s ease-in-out;
    }

    .botao-microfone:hover {
      background-color: #e6f0ff;
    }

    .botao-microfone.gravando {
      background-color: red;
      color: white;
      border-color: red;
    }
  </style>
</head>
<body>

  <button id="btnGravar" class="botao-microfone" title="Clique para falar">üéôÔ∏è</button>

  <script>
    const btn = document.getElementById('btnGravar');
    const TARGET_ORIGIN = 'https://verdeagritech--testes.sandbox.lightning.force.com';
    let recognition;
    let isGravando = false;

    btn.onclick = () => {
      if (!('webkitSpeechRecognition' in window)) {
        alert('Reconhecimento de voz n√£o suportado neste navegador.');
        return;
      }

      if (!isGravando) {
        recognition = new webkitSpeechRecognition();
        recognition.lang = 'pt-BR';
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        recognition.onstart = () => {
          isGravando = true;
          btn.textContent = '‚èπÔ∏è';
          btn.classList.add('gravando');
        };

        recognition.onresult = (event) => {
          const texto = event.results[0][0].transcript;
          console.log('üó£Ô∏è Texto reconhecido:', texto);

          window.parent.postMessage(
            { textoTranscrito: texto },
            TARGET_ORIGIN
          );

          console.log('‚úÖ Texto enviado via postMessage');
        };

        recognition.onerror = (event) => {
          console.error('‚ùå Erro no reconhecimento:', event.error);
          alert('Erro: ' + event.error);
        };

        recognition.onend = () => {
          isGravando = false;
          btn.textContent = 'üéôÔ∏è';
          btn.classList.remove('gravando');
        };

        recognition.start();
      } else {
        recognition.stop();
      }
    };
  </script>

</body>
</html>
<!-- Entrada de texto e √°udio git add index.html
git commit -m "üõ†Ô∏è com reconhecimento"
git push origin main -->